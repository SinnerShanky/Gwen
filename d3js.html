<html>
<head>
	<title>
		Histogram
	</title>
	<script src="http://d3js.org/d3.v3.min.js"></script>
</head>

<body>
	<script>
		
		var dataArray = [60,20,30,20,50,30,20];
		
		cnvWidth = document.innerWidth;
		cnvHeight = document.innerHeight;
		
		var heightScale = d3.scale.linear()
							.domain([0,100])
							.range([0,500]);
		
		var colorScale = d3.scale.linear()
							.domain([0,60])
							.range(["#ff0000","#0000ff"]);
		
		var canvas = d3.select("body")
					.append("svg")
					.attr("width",cnvWidth)
					.attr("height",cnvHeight);

		var bars = canvas.selectAll("rect")
					.data(dataArray)
					.enter()
						.append("rect")
						.attr("width",50)
						.attr("height",0)
						.attr("x",function(d,i) {	return i*55;	});
		
		var load = canvas.append("text")
					.text("Loading...")
					.attr("x",100)
					.attr("y",100)
					.attr("font-family","Helvetica")
					.attr("font-size","30pt")
					.attr("fill","white")
					.transition()
						.duration(1000)
						.attr("fill","black")
						.transition()
							.duration(1000)
							.delay(2000)
							.attr("fill","white")
							.transition()
								.duration(100)
								.attr("y",500)
								.transition()
									.each("end",function()	{
															canvas.selectAll("rect")
															.transition()
																.attr("height",function(d) {	return heightScale(d);	})
																.duration(1000)
																.delay(500)
																.attr("fill",function(d) {	return colorScale(d);	});
															});
															
		/*var barText = canvas.selectAll("text")
						.data(dataArray)
						.enter()
							.append("text")
							.text("Test")
							.attr("font-family","Helvetica")
							.attr("fill","black")
							.attr("x",function(d,i) {	return i*55;	});*/
	
	</script>
</body>
</html>